{
  "version": 3,
  "sources": ["dep:vue3-lazyload", "../vue3-lazyload/dist/index.mjs", "../vue3-lazyload/node_modules/vue-demi/lib/index.mjs"],
  "sourcesContent": ["import d from \"./node_modules/vue3-lazyload/dist/index.mjs\";export default d;\nexport * from \"./node_modules/vue3-lazyload/dist/index.mjs\"", "import { ref, onMounted, onUnmounted, watch } from 'vue-demi';\n\nvar LifecycleEnum = /* @__PURE__ */ ((LifecycleEnum2) => {\n  LifecycleEnum2[\"LOADING\"] = \"loading\";\n  LifecycleEnum2[\"LOADED\"] = \"loaded\";\n  LifecycleEnum2[\"ERROR\"] = \"error\";\n  return LifecycleEnum2;\n})(LifecycleEnum || {});\n\nconst inBrowser = typeof window !== \"undefined\" && window !== null;\nconst hasIntersectionObserver = checkIntersectionObserver();\nconst isEnumerable = Object.prototype.propertyIsEnumerable;\nconst getSymbols = Object.getOwnPropertySymbols;\nfunction isObject(val) {\n  return typeof val === \"function\" || toString.call(val) === \"[object Object]\";\n}\nfunction isPrimitive(val) {\n  return typeof val === \"object\" ? val === null : typeof val !== \"function\";\n}\nfunction isValidKey(key) {\n  return key !== \"__proto__\" && key !== \"constructor\" && key !== \"prototype\";\n}\nfunction checkIntersectionObserver() {\n  if (inBrowser && \"IntersectionObserver\" in window && \"IntersectionObserverEntry\" in window && \"intersectionRatio\" in window.IntersectionObserverEntry.prototype) {\n    if (!(\"isIntersecting\" in window.IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(window.IntersectionObserverEntry.prototype, \"isIntersecting\", {\n        get() {\n          return this.intersectionRatio > 0;\n        }\n      });\n    }\n    return true;\n  }\n  return false;\n}\nfunction assignSymbols(target, ...args) {\n  if (!isObject(target))\n    throw new TypeError(\"expected the first argument to be an object\");\n  if (args.length === 0 || typeof Symbol !== \"function\" || typeof getSymbols !== \"function\")\n    return target;\n  for (const arg of args) {\n    const names = getSymbols(arg);\n    for (const key of names) {\n      if (isEnumerable.call(arg, key))\n        target[key] = arg[key];\n    }\n  }\n  return target;\n}\nfunction assign(target, ...args) {\n  let i = 0;\n  if (isPrimitive(target))\n    target = args[i++];\n  if (!target)\n    target = {};\n  for (; i < args.length; i++) {\n    if (isObject(args[i])) {\n      for (const key of Object.keys(args[i])) {\n        if (isValidKey(key)) {\n          if (isObject(target[key]) && isObject(args[i][key]))\n            assign(target[key], args[i][key]);\n          else\n            target[key] = args[i][key];\n        }\n      }\n      assignSymbols(target, args[i]);\n    }\n  }\n  return target;\n}\n\nconst DEFAULT_LOADING = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\nconst DEFAULT_ERROR = \"\";\n\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: \"0px\",\n  threshold: 0\n};\nconst TIMEOUT_ID_DATA_ATTR = \"data-lazy-timeout-id\";\nclass Lazy {\n  constructor(options) {\n    this.options = {\n      loading: DEFAULT_LOADING,\n      error: DEFAULT_ERROR,\n      observerOptions: DEFAULT_OBSERVER_OPTIONS,\n      log: true,\n      lifecycle: {}\n    };\n    this._images = /* @__PURE__ */ new WeakMap();\n    this.config(options);\n  }\n  config(options = {}) {\n    assign(this.options, options);\n  }\n  mount(el, binding) {\n    if (!el)\n      return;\n    const { src, loading, error, lifecycle, delay } = this._valueFormatter(typeof binding === \"string\" ? binding : binding.value);\n    this._lifecycle(LifecycleEnum.LOADING, lifecycle, el);\n    el.setAttribute(\"src\", loading || DEFAULT_LOADING);\n    if (!hasIntersectionObserver) {\n      this.loadImages(el, src, error, lifecycle);\n      this._log(() => {\n        throw new Error(\"Not support IntersectionObserver!\");\n      });\n    }\n    this._initIntersectionObserver(el, src, error, lifecycle, delay);\n  }\n  update(el, binding) {\n    if (!el)\n      return;\n    this._realObserver(el)?.unobserve(el);\n    const { src, error, lifecycle, delay } = this._valueFormatter(typeof binding === \"string\" ? binding : binding.value);\n    this._initIntersectionObserver(el, src, error, lifecycle, delay);\n  }\n  unmount(el) {\n    if (!el)\n      return;\n    this._realObserver(el)?.unobserve(el);\n    this._images.delete(el);\n  }\n  loadImages(el, src, error, lifecycle) {\n    this._setImageSrc(el, src, error, lifecycle);\n  }\n  _setImageSrc(el, src, error, lifecycle) {\n    if (el.tagName.toLowerCase() === \"img\") {\n      if (src) {\n        const preSrc = el.getAttribute(\"src\");\n        if (preSrc !== src)\n          el.setAttribute(\"src\", src);\n      }\n      this._listenImageStatus(el, () => {\n        this._lifecycle(LifecycleEnum.LOADED, lifecycle, el);\n      }, () => {\n        el.onload = null;\n        this._lifecycle(LifecycleEnum.ERROR, lifecycle, el);\n        this._realObserver(el)?.disconnect();\n        if (error) {\n          const newImageSrc = el.getAttribute(\"src\");\n          if (newImageSrc !== error)\n            el.setAttribute(\"src\", error);\n        }\n        this._log(() => {\n          throw new Error(`Image failed to load!And failed src was: ${src} `);\n        });\n      });\n    } else {\n      el.style.backgroundImage = `url('${src}')`;\n    }\n  }\n  _initIntersectionObserver(el, src, error, lifecycle, delay) {\n    const observerOptions = this.options.observerOptions;\n    this._images.set(el, new IntersectionObserver((entries) => {\n      Array.prototype.forEach.call(entries, (entry) => {\n        if (delay && delay > 0)\n          this._delayedIntersectionCallback(el, entry, delay, src, error, lifecycle);\n        else\n          this._intersectionCallback(el, entry, src, error, lifecycle);\n      });\n    }, observerOptions));\n    this._realObserver(el)?.observe(el);\n  }\n  _intersectionCallback(el, entry, src, error, lifecycle) {\n    if (entry.isIntersecting) {\n      this._realObserver(el)?.unobserve(entry.target);\n      this._setImageSrc(el, src, error, lifecycle);\n    }\n  }\n  _delayedIntersectionCallback(el, entry, delay, src, error, lifecycle) {\n    if (entry.isIntersecting) {\n      if (entry.target.hasAttribute(TIMEOUT_ID_DATA_ATTR))\n        return;\n      const timeoutId = setTimeout(() => {\n        this._intersectionCallback(el, entry, src, error, lifecycle);\n        entry.target.removeAttribute(TIMEOUT_ID_DATA_ATTR);\n      }, delay);\n      entry.target.setAttribute(TIMEOUT_ID_DATA_ATTR, String(timeoutId));\n    } else {\n      if (entry.target.hasAttribute(TIMEOUT_ID_DATA_ATTR)) {\n        clearTimeout(Number(entry.target.getAttribute(TIMEOUT_ID_DATA_ATTR)));\n        entry.target.removeAttribute(TIMEOUT_ID_DATA_ATTR);\n      }\n    }\n  }\n  _listenImageStatus(image, success, error) {\n    image.onload = success;\n    image.onerror = error;\n  }\n  _valueFormatter(value) {\n    let src = value;\n    let loading = this.options.loading;\n    let error = this.options.error;\n    let lifecycle = this.options.lifecycle;\n    let delay = this.options.delay;\n    if (isObject(value)) {\n      src = value.src;\n      loading = value.loading || this.options.loading;\n      error = value.error || this.options.error;\n      lifecycle = value.lifecycle || this.options.lifecycle;\n      delay = value.delay || this.options.delay;\n    }\n    return {\n      src,\n      loading,\n      error,\n      lifecycle,\n      delay\n    };\n  }\n  _log(callback) {\n    if (this.options.log)\n      callback();\n  }\n  _lifecycle(life, lifecycle, el) {\n    switch (life) {\n      case LifecycleEnum.LOADING:\n        el?.setAttribute(\"lazy\", LifecycleEnum.LOADING);\n        if (lifecycle?.loading)\n          lifecycle.loading(el);\n        break;\n      case LifecycleEnum.LOADED:\n        el?.setAttribute(\"lazy\", LifecycleEnum.LOADED);\n        if (lifecycle?.loaded)\n          lifecycle.loaded(el);\n        break;\n      case LifecycleEnum.ERROR:\n        el?.setAttribute(\"lazy\", LifecycleEnum.ERROR);\n        if (lifecycle?.error)\n          lifecycle.error(el);\n        break;\n    }\n  }\n  _realObserver(el) {\n    return this._images.get(el);\n  }\n}\n\nfunction useLazyload(src, options) {\n  const lazyRef = ref(null);\n  const lazy = new Lazy(options);\n  onMounted(() => {\n    lazyRef.value && lazy.mount(lazyRef.value, src.value);\n  });\n  onUnmounted(() => {\n    lazyRef.value && lazy.unmount(lazyRef.value);\n  });\n  watch(src, (newVal) => {\n    if (src.value)\n      lazy.update(lazyRef.value, newVal);\n  });\n  return lazyRef;\n}\n\nconst index = {\n  install(Vue, options) {\n    const lazy = new Lazy(options);\n    Vue.config.globalProperties.$Lazyload = lazy;\n    Vue.provide(\"Lazyload\", lazy);\n    Vue.directive(\"lazy\", {\n      mounted: lazy.mount.bind(lazy),\n      updated: lazy.update.bind(lazy),\n      unmounted: lazy.unmount.bind(lazy)\n    });\n  }\n};\n\nexport { index as default, useLazyload };\n", "import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n"],
  "mappings": "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",
  "names": []
}
